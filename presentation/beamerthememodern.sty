%
% Name    : beamerthememodern.sty
% Author  : Nikolay Obedin (dancingrobot84@gmail.com)
% Version : 0.1.0
%

\ProvidesPackage{beamerthememodern}[2014/08/31]
\mode<presentation>


% -- custom colors -- %
\definecolor{modernWhite}{HTML}{FFFFFF}
\definecolor{modernRed}{HTML}{E74C3C}
\definecolor{modernBlue1}{HTML}{2980B9}
\definecolor{modernBlue2}{HTML}{3498DB}
\definecolor{modernGreen}{HTML}{1BAD58}
\definecolor{modernDarkBlue}{HTML}{2C3E50}


% -- custom fonts -- %
\usepackage{fontspec}
\newfontfamily{\modernFontLight}{Roboto-Light}
\newfontfamily{\modernFontNormal}{Roboto}
\newfontfamily{\modernFontBold}{Roboto Medium}
\newfontfamily{\modernFontExtraBold}{Roboto Black}
\setmainfont[Ligatures=TeX]{Roboto Light}
\setsansfont[Ligatures=TeX]{Roboto Light}


% -- general beamer colors -- %
\setbeamercolor{palette primary}{bg=modernWhite, fg=modernBlue1}
\setbeamercolor{palette secondary}{bg=modernBlue1, fg=modernWhite}
\setbeamercolor{palette tertiary}{bg=modernBlue2, fg=modernWhite}
\setbeamercolor{palette quaternary}{bg=modernDarkBlue, fg=modernWhite}

\setbeamercolor{title}{parent=palette primary}
\setbeamercolor{subtitle}{parent=palette primary}
\setbeamercolor{author}{parent=palette primary}
\setbeamercolor{institute}{parent=palette primary}
\setbeamercolor{date}{parent=palette primary}

\setbeamercolor{frametitle}{parent=palette secondary}
\setbeamercolor{section title}{parent=paletter secondary}
\setbeamercolor{section in toc}{parent=palette primary}

\setbeamercolor{background canvas}{parent=palette primary}
\setbeamercolor{normal text}{fg=modernDarkBlue}
\setbeamercolor{item}{fg=modernBlue1}

\setbeamercolor{block title}{parent=palette tertiary}
\setbeamercolor{block body}{parent=palette quaternary}
\setbeamercolor{block title example}{bg=modernGreen, fg=modernWhite}
\setbeamercolor{block body example}{parent=palette quaternary}
\setbeamercolor{block title alerted}{bg=modernRed, fg=modernWhite}
\setbeamercolor{block body alerted}{parent=palette quaternary}

\setbeamercolor{structure}{fg=modernBlue1}


% -- beamer fonts -- %
\setbeamerfont{title}{family=\modernFontExtraBold, size=\fontsize{25}{25}}
\setbeamerfont{subtitle}{family=\modernFontBold, size=\fontsize{15}{15}}
\setbeamerfont{author}{family=\modernFontNormal, size=\fontsize{10}{10}}
\setbeamerfont{institute}{family=\modernFontNormal, size=\fontsize{10}{10}}
\setbeamerfont{date}{family=\modernFontNormal, size=\fontsize{7}{7}}

\setbeamerfont{frametitle}{family=\modernFontBold, size=\fontsize{10}{10}}
\setbeamerfont{section title}{family=\modernFontNormal, size=\fontsize{25}{25}}
\setbeamerfont{section in toc}{family=\modernFontNormal, size=\fontsize{13}{13}}

\setbeamerfont{item}{family=\modernFontNormal}
\setbeamerfont{block title}{family=\modernFontNormal}
\setbeamerfont{block body}{family=\modernFontLight}
\setbeamerfont{block title example}{family=\modernFontNormal}
\setbeamerfont{block body example}{family=\modernFontLight}
\setbeamerfont{block title alerted}{family=\modernFontNormal}
\setbeamerfont{block body alerted}{family=\modernFontLight}

\setbeamerfont{page number in head/foot}{family=\modernFontBold}


% -- beamer frame title -- %
\setbeamertemplate{frametitle}{
    \vspace{-0.5ex}
    \begin{beamercolorbox}[wd=\paperwidth,leftskip=0.3cm,rightskip=0.3cm,ht=3.5ex,dp=2ex]{frametitle}
        \usebeamerfont{frametitle}\MakeUppercase{\insertframetitle}%
    \end{beamercolorbox}
}


% -- section frame -- %
%\newcommand{\insertsectionHEAD}{\expandafter\insertsectionHEADaux\insertsectionhead}
%\newcommand{\insertsectionHEADaux}[3]{\MakeUppercase{#3}}
%\AtBeginSection[]{
%    \begingroup
%        \setbeamercolor{background canvas}{parent=palette secondary}
%        \begin{frame}[plain]
%            \centering
%            \vfill
%            \usebeamerfont{section title}\usebeamercolor[fg]{frametitle}\insertsectionHEAD
%            \vfill
%        \end{frame}
%    \endgroup
%}


% -- toc elements -- %
\setbeamertemplate{section in toc}[sections numbered]
\setbeamertemplate{subsection in toc}[subsections numbered]


% -- itemize bullets -- %
\newcommand{\modernBullet}{â€¢}
\setbeamertemplate{itemize item}{\modernBullet}
\setbeamertemplate{itemize subitem}{\modernBullet}
\setbeamertemplate{itemize subsubitem}{\modernBullet}


% -- footline -- %
\usenavigationsymbolstemplate{}
\setbeamertemplate{footline} {
    \begin{beamercolorbox}[wd=\textwidth,ht=3ex,dp=1.5ex,leftskip=0.3cm,rightskip=0.3cm]{structure}
    \hfill\usebeamerfont{page number in head/foot}
    \insertframenumber/\inserttotalframenumber
    \end{beamercolorbox}
}


%}}}
%{{{ --- pgfplots ---------------------

%{{{ Colors

% TolColors from http://www.r-bloggers.com/the-paul-tol-21-color-salute/
\definecolor{TolColor1}{HTML}{332288}   % dark purple
\definecolor{TolColor2}{HTML}{6699CC}   % dark blue
\definecolor{TolColor3}{HTML}{88CCEE}   % light blue
\definecolor{TolColor4}{HTML}{44AA99}   % light green
\definecolor{TolColor5}{HTML}{117733}   % dark green
\definecolor{TolColor6}{HTML}{999933}   % dark brown
\definecolor{TolColor7}{HTML}{DDCC77}   % light brown
\definecolor{TolColor8}{HTML}{661100}   % dark red
\definecolor{TolColor9}{HTML}{CC6677}   % light red
\definecolor{TolColor10}{HTML}{AA4466}  % light pink
\definecolor{TolColor11}{HTML}{882255}  % dark pink
\definecolor{TolColor12}{HTML}{AA4499}  % light purple

%}}}
%{{{ Color cycles

\pgfplotscreateplotcyclelist{mbarplot cycle}{%
  {draw=TolColor2, fill=TolColor2!70},
  {draw=TolColor7, fill=TolColor7!70},
  {draw=TolColor4, fill=TolColor4!70},
  {draw=TolColor11, fill=TolColor11!70},
  {draw=TolColor1, fill=TolColor1!70},
  {draw=TolColor8, fill=TolColor8!70},
  {draw=TolColor6, fill=TolColor6!70},
  {draw=TolColor9, fill=TolColor9!70},
  {draw=TolColor10, fill=TolColor10!70},
  {draw=TolColor12, fill=TolColor12!70},
  {draw=TolColor3, fill=TolColor3!70},
  {draw=TolColor5, fill=TolColor5!70},
}

\pgfplotscreateplotcyclelist{mlineplot cycle}{%
  {TolColor2, mark=*, mark size=1.5pt},
  {TolColor7, mark=square*, mark size=1.3pt},
  {TolColor4, mark=triangle*, mark size=1.5pt},
  {TolColor6, mark=diamond*, mark size=1.5pt},
}


\pgfplotsset{
  compat=1.9,
  mbaseplot/.style={
    legend style={
      draw=none,
      fill=none,
      cells={anchor=west},
    },
    x tick label style={
      font=\footnotesize
    },
    y tick label style={
      font=\footnotesize
    },
    legend style={
      font=\footnotesize
    },
    major grid style={
      dotted,
    },
    axis x line*=bottom,
  },
  mlineplot/.style={
    mbaseplot,
    xmajorgrids=true,
    ymajorgrids=true,
    major grid style={dotted},
    axis x line=bottom,
    axis y line=left,
    legend style={
      cells={anchor=west},
      draw=none
    },
    cycle list name=mlineplot cycle,
  },
  mbarplot base/.style={
    mbaseplot,
    bar width=6pt,
    axis y line*=none,
  },
  mbarplot/.style={
    mbarplot base,
    ybar,
    xmajorgrids=false,
    ymajorgrids=true,
    area legend,
    legend image code/.code={%
      \draw[#1] (0cm,-0.1cm) rectangle (0.15cm,0.1cm);
    },
    cycle list name=mbarplot cycle,
  },
  horizontal mbarplot/.style={
    mbarplot base,
    xmajorgrids=true,
    ymajorgrids=false,
    xbar stacked,
    area legend,
    legend image code/.code={%
      \draw[#1] (0cm,-0.1cm) rectangle (0.15cm,0.1cm);
    },
    cycle list name=mbarplot cycle,
  },
  disable thousands separator/.style={
    /pgf/number format/.cd,
      1000 sep={}
  },
}


\mode<all>
